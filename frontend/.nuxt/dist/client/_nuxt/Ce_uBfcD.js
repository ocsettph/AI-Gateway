import{e as w,u as N,r as y,h as U,c as m,a as t,H as h,p as b,j as x,k as o,q as s,v as I,G as V,d as c,t as B,g as f,I as T,o as p,m as i}from"#entry";const q={class:"min-h-screen py-10 bg-transparent dark:bg-transparent"},_={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8"},S={class:"bg-white dark:!bg-[#1B1B1B] rounded-2xl shadow-sm border border-gray-200 dark:border-gray-700/60 p-8"},D={class:"grid md:grid-cols-2 gap-6"},A={key:0},E={key:1},C={class:"flex items-start space-x-3"},P=["disabled"],L=w({__name:"request",setup(K){N({title:"Request Access - UBU AI FLOW",meta:[{name:"description",content:"ขอสิทธิ์การใช้งาน UBU AI FLOW"}]});const r=y({firstName:"",lastName:"",email:"",studentId:"",department:"",apiKeyName:"",purpose:"",expectedUsage:"",courseName:"",otherDetails:"",agreeTerms:!1}),u=y(!1),v=T(),g=async()=>{try{const l=f().public.apiBase,e=await $fetch(`${l}/api/me`,{credentials:"include"});e?.user&&(r.value.firstName=e.user.fullname?.split(" ")[0]||"",r.value.lastName=e.user.fullname?.split(" ").slice(1).join(" ")||"",r.value.email=e.user.email||"",r.value.studentId=e.user.personcode||"",r.value.department=e.user.department_name||e.user.faculty||"")}catch(l){console.error("Error fetching user data:",l)}},k=async()=>{if(r.value.expectedUsage==="education"&&!r.value.courseName?.trim()){try{await(await i(async()=>{const{default:e}=await import("./DrhBs4VY.js");return{default:e}},[],import.meta.url)).default.fire({icon:"warning",title:"กรุณากรอกข้อมูล",text:"กรุณาระบุรายวิชาที่จะใช้",confirmButtonText:"ตกลง"})}catch{n("error","กรุณาระบุรายวิชาที่จะใช้")}return}if(r.value.expectedUsage==="other"&&!r.value.otherDetails?.trim()){try{await(await i(async()=>{const{default:e}=await import("./DrhBs4VY.js");return{default:e}},[],import.meta.url)).default.fire({icon:"warning",title:"กรุณากรอกข้อมูล",text:"กรุณาระบุรายละเอียดการใช้งาน",confirmButtonText:"ตกลง"})}catch{n("error","กรุณาระบุรายละเอียดการใช้งาน")}return}u.value=!0;try{const l=f().public.apiBase,e=await $fetch(`${l}/api/requests`,{method:"POST",body:{...r.value,creditLimit:10},credentials:"include"});r.value={firstName:"",lastName:"",email:"",studentId:"",department:"",apiKeyName:"",purpose:"",expectedUsage:"",courseName:"",otherDetails:"",agreeTerms:!1},await g();try{await(await i(async()=>{const{default:d}=await import("./DrhBs4VY.js");return{default:d}},[],import.meta.url)).default.fire({icon:"success",title:"คำขอถูกส่งแล้ว",text:"รอการอนุมัติจากทีมงาน",confirmButtonText:"ดูสถานะคำขอ"})}catch{n("success","ส่งคำขอเรียบร้อยแล้ว! รอการอนุมัติจากทีมงาน")}v.push("/keys")}catch(l){console.error("Error submitting request:",l);try{await(await i(async()=>{const{default:a}=await import("./DrhBs4VY.js");return{default:a}},[],import.meta.url)).default.fire({icon:"error",title:"ส่งคำขอล้มเหลว",text:"กรุณาลองใหม่อีกครั้ง",confirmButtonText:"ปิด"})}catch{n("error","เกิดข้อผิดพลาดในการส่งคำขอ กรุณาลองใหม่อีกครั้ง")}}finally{u.value=!1}};U(()=>{g()});function n(l,e){const a=document.createElement("div");a.className="fixed inset-0 flex items-start justify-center pointer-events-none",a.style.zIndex="9999";const d=document.createElement("div");d.className=`mt-6 px-4 py-3 rounded-lg shadow-lg text-white pointer-events-auto ${l==="success"?"bg-green-600":"bg-red-600"}`,d.textContent=e,a.appendChild(d),document.body.appendChild(a),setTimeout(()=>{a.remove()},3e3)}return(l,e)=>(p(),m("div",q,[t("div",_,[e[24]||(e[24]=t("div",{class:"mb-12 text-center"},[t("h1",{class:"text-4xl font-bold text-gray-900 dark:text-white mb-4"},"Request Access"),t("p",{class:"text-xl text-gray-600 dark:text-gray-300"},"ขอสิทธิ์การใช้งาน UBU AI FLOW")],-1)),t("div",S,[t("form",{onSubmit:h(k,["prevent"]),class:"space-y-6"},[t("div",D,[t("div",null,[e[11]||(e[11]=t("label",{for:"firstName",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"ชื่อ",-1)),o(t("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>r.value.firstName=a),type:"text",id:"firstName",required:"",readonly:"",class:"w-full px-4 py-3 border border-gray-200 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-600 text-gray-500 dark:text-gray-400 cursor-not-allowed",placeholder:"ชื่อจริง"},null,512),[[s,r.value.firstName]])]),t("div",null,[e[12]||(e[12]=t("label",{for:"lastName",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"นามสกุล",-1)),o(t("input",{"onUpdate:modelValue":e[1]||(e[1]=a=>r.value.lastName=a),type:"text",id:"lastName",required:"",readonly:"",class:"w-full px-4 py-3 border border-gray-200 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-600 text-gray-500 dark:text-gray-400 cursor-not-allowed",placeholder:"นามสกุล"},null,512),[[s,r.value.lastName]])])]),t("div",null,[e[13]||(e[13]=t("label",{for:"email",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"อีเมล UBU",-1)),o(t("input",{"onUpdate:modelValue":e[2]||(e[2]=a=>r.value.email=a),type:"email",id:"email",required:"",readonly:"",class:"w-full px-4 py-3 border border-gray-200 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-600 text-gray-500 dark:text-gray-400 cursor-not-allowed",placeholder:"your.email@ubu.ac.th"},null,512),[[s,r.value.email]])]),t("div",null,[e[14]||(e[14]=t("label",{for:"studentId",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"รหัสนักศึกษา/บุคลากร",-1)),o(t("input",{"onUpdate:modelValue":e[3]||(e[3]=a=>r.value.studentId=a),type:"text",id:"studentId",required:"",readonly:"",class:"w-full px-4 py-3 border border-gray-200 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-600 text-gray-500 dark:text-gray-400 cursor-not-allowed",placeholder:"รหัสนักศึกษา หรือ รหัสบุคลากร"},null,512),[[s,r.value.studentId]])]),t("div",null,[e[15]||(e[15]=t("label",{for:"department",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"คณะ/หน่วยงาน",-1)),o(t("input",{"onUpdate:modelValue":e[4]||(e[4]=a=>r.value.department=a),type:"text",id:"department",required:"",readonly:"",class:"w-full px-4 py-3 border border-gray-200 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-600 text-gray-500 dark:text-gray-400 cursor-not-allowed",placeholder:"คณะ/หน่วยงาน"},null,512),[[s,r.value.department]])]),t("div",null,[e[16]||(e[16]=t("label",{for:"apiKeyName",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"ชื่อ API Key",-1)),o(t("input",{"onUpdate:modelValue":e[5]||(e[5]=a=>r.value.apiKeyName=a),type:"text",id:"apiKeyName",required:"",class:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",placeholder:"เช่น My Project API Key"},null,512),[[s,r.value.apiKeyName]])]),t("div",null,[e[17]||(e[17]=t("label",{for:"purpose",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"วัตถุประสงค์การใช้งาน",-1)),o(t("textarea",{"onUpdate:modelValue":e[6]||(e[6]=a=>r.value.purpose=a),id:"purpose",rows:"4",required:"",class:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",placeholder:"อธิบายวัตถุประสงค์การใช้งาน AI services..."},null,512),[[s,r.value.purpose]])]),t("div",null,[e[19]||(e[19]=t("label",{for:"expectedUsage",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"การใช้งานที่คาดหวัง",-1)),o(t("select",{"onUpdate:modelValue":e[7]||(e[7]=a=>r.value.expectedUsage=a),id:"expectedUsage",required:"",class:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white"},[...e[18]||(e[18]=[x('<option value="">เลือกการใช้งานที่คาดหวัง</option><option value="research">งานวิจัย</option><option value="education">การเรียนการสอน</option><option value="project">โปรเจค/วิทยานิพนธ์</option><option value="personal">การใช้งานส่วนตัว</option><option value="other">อื่นๆ</option>',6)])],512),[[I,r.value.expectedUsage]])]),r.value.expectedUsage==="education"?(p(),m("div",A,[e[20]||(e[20]=t("label",{for:"courseName",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"ขอใช้ในรายวิชา",-1)),o(t("input",{"onUpdate:modelValue":e[8]||(e[8]=a=>r.value.courseName=a),type:"text",id:"courseName",required:"",class:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",placeholder:"เช่น CS101, วิชาโปรแกรมมิ่ง"},null,512),[[s,r.value.courseName]])])):b("",!0),r.value.expectedUsage==="other"?(p(),m("div",E,[e[21]||(e[21]=t("label",{for:"otherDetails",class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"รายละเอียด",-1)),o(t("textarea",{"onUpdate:modelValue":e[9]||(e[9]=a=>r.value.otherDetails=a),id:"otherDetails",rows:"3",required:"",class:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",placeholder:"กรุณาระบุรายละเอียดการใช้งาน..."},null,512),[[s,r.value.otherDetails]])])):b("",!0),e[23]||(e[23]=x('<div class="p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-800"><div class="flex items-center"><svg class="w-5 h-5 text-green-600 dark:text-green-400 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"></path></svg><span class="text-sm font-medium text-green-800 dark:text-green-200"> ระบบจะกำหนดค่าเริ่มต้นเครดิตที่ 10 USD สำหรับ API Key นี้ </span></div></div>',1)),t("div",C,[o(t("input",{"onUpdate:modelValue":e[10]||(e[10]=a=>r.value.agreeTerms=a),type:"checkbox",id:"agreeTerms",required:"",class:"mt-1 w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"},null,512),[[V,r.value.agreeTerms]]),e[22]||(e[22]=t("label",{for:"agreeTerms",class:"text-sm text-gray-600 dark:text-gray-300"},[c(" ฉันยอมรับ "),t("a",{href:"/terms",class:"text-blue-600 dark:text-blue-400 hover:underline"},"ข้อกำหนดการใช้งาน"),c(" และ "),t("a",{href:"/privacy",class:"text-blue-600 dark:text-blue-400 hover:underline"},"นโยบายความเป็นส่วนตัว")],-1))]),t("button",{type:"submit",disabled:u.value,class:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-semibold py-3 px-6 rounded-lg transition-colors"},B(u.value?"กำลังส่งคำขอ...":"ส่งคำขอการใช้งาน"),9,P)],32)])])]))}});export{L as default};
