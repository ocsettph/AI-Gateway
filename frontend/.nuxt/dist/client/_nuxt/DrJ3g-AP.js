import{e as st,u as ot,r as u,f as w,h as dt,c as l,a as t,p as A,b as lt,w as nt,t as s,k as g,q as p,v as f,F as E,l as V,H as G,n as v,g as j,_ as it,o as n,d as z,m as J}from"#entry";const ut={class:"min-h-screen bg-transparent dark:bg-transparent py-8"},gt={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},xt={class:"mb-8"},ct={class:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4"},yt={class:"flex flex-col sm:flex-row gap-2 sm:space-x-3"},mt={class:"grid grid-cols-2 md:grid-cols-4 gap-3 md:gap-6 mb-8"},vt={class:"bg-white dark:bg-gray-800 rounded-lg shadow p-6"},bt={class:"flex items-center"},pt={class:"ml-4"},ft={class:"text-2xl font-bold text-gray-900 dark:text-white"},kt={class:"bg-white dark:bg-gray-800 rounded-lg shadow p-6"},wt={class:"flex items-center"},ht={class:"ml-4"},_t={class:"text-2xl font-bold text-gray-900 dark:text-white"},Ut={class:"bg-white dark:bg-gray-800 rounded-lg shadow p-6"},Ct={class:"flex items-center"},Mt={class:"ml-4"},At={class:"text-2xl font-bold text-gray-900 dark:text-white"},Bt={class:"bg-white dark:bg-gray-800 rounded-lg shadow p-6"},St={class:"flex items-center"},$t={class:"ml-4"},Dt={class:"text-2xl font-bold text-gray-900 dark:text-white"},Et={class:"bg-white dark:bg-gray-800 shadow rounded-lg mb-6"},Vt={class:"px-4 md:px-6 py-4 border-b border-gray-200 dark:border-gray-700"},jt={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},zt={class:"bg-white dark:bg-gray-800 shadow rounded-lg"},Lt={class:"px-4 md:px-6 py-4 border-b border-gray-200 dark:border-gray-700"},Rt={class:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4"},Ht={class:"text-base md:text-lg font-medium text-gray-900 dark:text-white"},It={class:"flex items-center gap-2"},Tt={class:"md:hidden p-4 space-y-4"},Nt={class:"flex items-start justify-between"},Pt={class:"flex items-center space-x-3"},Ft={class:"flex-shrink-0 h-10 w-10"},qt={class:"h-10 w-10 rounded-full bg-gray-300 dark:bg-gray-600 flex items-center justify-center"},Ot={key:0,class:"w-6 h-6 text-blue-700 dark:text-blue-300",viewBox:"0 0 24 24",fill:"currentColor"},Qt={key:1,class:"w-6 h-6 text-pink-700 dark:text-pink-300",viewBox:"0 0 24 24",fill:"currentColor"},Wt={class:"text-sm font-medium text-gray-900 dark:text-white"},Gt={class:"text-xs text-gray-500 dark:text-gray-400"},Jt={class:"space-y-1 text-sm"},Kt={class:"text-gray-900 dark:text-white"},Xt={class:"text-gray-900 dark:text-white"},Yt={class:"text-gray-900 dark:text-white"},Zt={class:"flex flex-wrap gap-2"},te={class:"text-xs text-gray-500 dark:text-gray-400"},ee={class:"flex gap-2 pt-2 border-t border-gray-200 dark:border-gray-600"},re=["onClick"],ae=["onClick"],se={class:"hidden md:block overflow-x-auto"},oe={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},de={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},le={class:"px-6 py-4 whitespace-nowrap"},ne={class:"flex items-center"},ie={class:"flex-shrink-0 h-10 w-10"},ue={class:"h-10 w-10 rounded-full bg-gray-300 dark:bg-gray-600 flex items-center justify-center"},ge={key:0,class:"w-6 h-6 text-blue-700 dark:text-blue-300",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},xe={key:1,class:"w-6 h-6 text-pink-700 dark:text-pink-300",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},ce={class:"ml-4"},ye={class:"text-sm font-medium text-gray-900 dark:text-white"},me={class:"text-sm text-gray-500 dark:text-gray-400"},ve={class:"px-6 py-4 whitespace-nowrap"},be={class:"text-sm text-gray-900 dark:text-white"},pe={class:"text-sm text-gray-500 dark:text-gray-400"},fe={class:"px-6 py-4 whitespace-nowrap"},ke={class:"text-sm text-gray-900 dark:text-white"},we={key:0,class:"text-sm text-gray-500 dark:text-gray-400"},he={class:"px-6 py-4 whitespace-nowrap"},_e={class:"px-6 py-4 whitespace-nowrap"},Ue={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},Ce={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},Me={class:"flex space-x-2"},Ae=["onClick"],Be=["onClick"],Se={key:0,class:"px-4 md:px-6 py-4 border-t border-gray-200 dark:border-gray-700"},$e={class:"flex flex-col sm:flex-row items-center justify-between gap-4"},De={class:"text-xs sm:text-sm text-gray-700 dark:text-gray-300 text-center sm:text-left"},Ee={class:"flex items-center flex-wrap justify-center gap-2"},Ve=["disabled"],je={class:"flex flex-wrap gap-1"},ze=["onClick"],Le=["disabled"],Re={key:0,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},He={class:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white dark:bg-gray-800"},Ie={class:"mt-3"},Te={class:"mb-4"},Ne={class:"relative"},Pe={key:0,class:"absolute z-10 w-full mt-1 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-lg max-h-60 overflow-y-auto"},Fe=["onClick"],qe={class:"font-medium text-gray-900 dark:text-white"},Oe={class:"text-sm text-gray-500 dark:text-gray-400"},Qe={class:"mb-4"},We=["disabled"],Ge={class:"mb-4"},Je=["disabled"],Ke={class:"mb-4"},Xe=["disabled"],Ye={class:"mb-4"},Ze=["disabled"],tr={class:"mb-4"},er={class:"mb-4"},rr={class:"flex justify-end space-x-3"},ar={key:1,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},sr={class:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white dark:bg-gray-800"},or={class:"mt-3"},dr={class:"mb-4"},lr={class:"mb-4"},nr={class:"mb-4"},ir={class:"flex justify-end space-x-3"},xr=st({__name:"users",setup(ur){ot({title:"จัดการผู้ใช้ - UBU AI FLOW"});const x=u([]),L=u(!1),B=u(!1),S=u(!1),y=u({}),i=u({fullname:"",ubuaccount:"",email:"",faculty:"",role:"USER",status:"active"}),h=u(""),_=u(""),U=u(""),c=u(1),b=u(25),$=w(()=>{const a=x.value.length,e=x.value.filter(d=>d.status==="active").length,o=x.value.filter(d=>d.role==="ADMIN").length,r=x.value.filter(d=>{const M=new Date().toDateString(),at=new Date(d.created_at).toDateString();return M===at}).length;return{totalUsers:a,activeUsers:e,adminUsers:o,newUsersToday:r}}),C=w(()=>{let a=x.value;if(h.value){const e=h.value.toLowerCase();a=a.filter(o=>o.fullname?.toLowerCase().includes(e)||o.ubuaccount?.toLowerCase().includes(e)||o.email?.toLowerCase().includes(e))}return _.value&&(a=a.filter(e=>e.role===_.value)),U.value&&(a=a.filter(e=>e.status===U.value)),a}),D=w(()=>Math.ceil(C.value.length/b.value)),R=w(()=>{const a=(c.value-1)*b.value,e=a+b.value;return C.value.slice(a,e)}),K=w(()=>{const a=[],e=D.value,o=c.value;let r=Math.max(1,o-2),d=Math.min(e,o+2);d-r<4&&(r===1?d=Math.min(e,r+4):r=Math.max(1,d-4));for(let M=r;M<=d;M++)a.push(M);return a}),X=async()=>{L.value=!0;try{const a=j().public.apiBase,e=await $fetch(`${a}/api/admin/users`,{credentials:"include"});x.value=e.users}catch(a){console.error("Error fetching users:",a)}finally{L.value=!1}},Y=()=>{h.value="",_.value="",U.value="",c.value=1},H=u([]),k=u(""),m=u(!1),I=w(()=>{const a=new Set(x.value.map(r=>(r.ubuaccount||"").toLowerCase()).filter(Boolean)),e=H.value.filter(r=>{const d=(r.ubuaccount||"").toLowerCase();return d&&!a.has(d)});if(!k.value)return e.slice(0,10);const o=k.value.toLowerCase();return e.filter(r=>r.fname?.toLowerCase().includes(o)||r.lname?.toLowerCase().includes(o)||r.ubuaccount?.toLowerCase().includes(o)||r.personcode?.includes(o)).slice(0,10)}),Z=async()=>{try{const a=await $fetch("https://dev.ubu.ac.th/api_hr/get_person_name");H.value=Array.isArray(a)?a:[]}catch(a){console.error("Error fetching HR data:",a)}},tt=a=>{i.value={fullname:`${a.prefix_name||""}${a.fname||""} ${a.lname||""}`.trim(),ubuaccount:a.ubuaccount||"",email:a.email||"",faculty:a.faculty_name||"",department_name:a.department_name||"",position:a.positiontype_name||"",level_name:a.level_name||"",personcode:a.personcode||"",role:"USER",status:"active"},k.value="",m.value=!0},et=async()=>{try{const a=j().public.apiBase,e=await $fetch(`${a}/api/admin/users`,{method:"POST",body:i.value,credentials:"include"});x.value.push(e.user),i.value={fullname:"",ubuaccount:"",email:"",faculty:"",role:"USER",status:"active"},S.value=!1,m.value=!1}catch(a){console.error("Error adding user:",a)}},T=a=>{y.value={...a},B.value=!0},rt=async()=>{try{const a=j().public.apiBase;await $fetch(`${a}/api/admin/users/${y.value.id}`,{method:"PATCH",body:{role:y.value.role,status:y.value.status},credentials:"include"});const e=x.value.findIndex(o=>o.id===y.value.id);e!==-1&&(x.value[e]={...x.value[e],...y.value}),B.value=!1}catch(a){console.error("Error updating user:",a)}},N=async a=>{try{if(!(await(await J(async()=>{const{default:r}=await import("./DrhBs4VY.js");return{default:r}},[],import.meta.url)).default.fire({icon:"warning",title:`ลบผู้ใช้ ${a.fullname}?`,text:"การลบไม่สามารถย้อนกลับได้",showCancelButton:!0,confirmButtonText:"ลบ",cancelButtonText:"ยกเลิก"})).isConfirmed)return}catch{}try{const e=j().public.apiBase;await $fetch(`${e}/api/admin/users/${a.id}`,{method:"DELETE",credentials:"include"}),x.value=x.value.filter(o=>o.id!==a.id)}catch(e){console.error("Error deleting user:",e);try{await(await J(async()=>{const{default:r}=await import("./DrhBs4VY.js");return{default:r}},[],import.meta.url)).default.fire({icon:"error",title:"ลบผู้ใช้ไม่สำเร็จ"})}catch{}}},P=a=>{switch(a){case"active":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300";case"inactive":return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-300";case"suspended":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-300"}},F=a=>{switch(a){case"active":return"Active";case"inactive":return"Inactive";case"suspended":return"Suspended";default:return"Unknown"}},q=a=>{switch(a){case"ADMIN":return"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300";case"USER":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-300"}},O=a=>{switch(a){case"ADMIN":return"Admin";case"USER":return"User";default:return"Unknown"}},Q=a=>a?a.trim().startsWith("นาย"):!1,W=a=>new Date(a).toLocaleDateString("th-TH",{year:"numeric",month:"long",day:"numeric"});return dt(()=>{X(),Z()}),(a,e)=>{const o=it;return n(),l("div",ut,[t("div",gt,[t("div",xt,[t("div",ct,[e[21]||(e[21]=t("div",null,[t("h1",{class:"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-white"},"จัดการผู้ใช้"),t("p",{class:"mt-2 text-sm sm:text-base text-gray-600 dark:text-gray-400"},"จัดการข้อมูลผู้ใช้และสิทธิ์การเข้าถึง")],-1)),t("div",yt,[t("button",{onClick:e[0]||(e[0]=r=>S.value=!0),class:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center space-x-2 text-sm sm:text-base"},[...e[19]||(e[19]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),t("span",null,"เพิ่มผู้ใช้",-1)])]),lt(o,{to:"/",class:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors flex items-center justify-center space-x-2 text-sm sm:text-base"},{default:nt(()=>[...e[20]||(e[20]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),t("span",null,"กลับ",-1)])]),_:1})])])]),t("div",mt,[t("div",vt,[t("div",bt,[e[23]||(e[23]=t("div",{class:"p-2 bg-blue-100 dark:bg-blue-900 rounded-lg"},[t("svg",{class:"w-6 h-6 text-blue-600 dark:text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})])],-1)),t("div",pt,[e[22]||(e[22]=t("p",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"ผู้ใช้ทั้งหมด",-1)),t("p",ft,s($.value.totalUsers),1)])])]),t("div",kt,[t("div",wt,[e[25]||(e[25]=t("div",{class:"p-2 bg-green-100 dark:bg-green-900 rounded-lg"},[t("svg",{class:"w-6 h-6 text-green-600 dark:text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),t("div",ht,[e[24]||(e[24]=t("p",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"ผู้ใช้ที่ใช้งาน",-1)),t("p",_t,s($.value.activeUsers),1)])])]),t("div",Ut,[t("div",Ct,[e[27]||(e[27]=t("div",{class:"p-2 bg-purple-100 dark:bg-purple-900 rounded-lg"},[t("svg",{class:"w-6 h-6 text-purple-600 dark:text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 00-1.066 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})])],-1)),t("div",Mt,[e[26]||(e[26]=t("p",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"Admin",-1)),t("p",At,s($.value.adminUsers),1)])])]),t("div",Bt,[t("div",St,[e[29]||(e[29]=t("div",{class:"p-2 bg-yellow-100 dark:bg-yellow-900 rounded-lg"},[t("svg",{class:"w-6 h-6 text-yellow-600 dark:text-yellow-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),t("div",$t,[e[28]||(e[28]=t("p",{class:"text-sm font-medium text-gray-600 dark:text-gray-400"},"ผู้ใช้ใหม่วันนี้",-1)),t("p",Dt,s($.value.newUsersToday),1)])])])]),t("div",Et,[t("div",Vt,[e[35]||(e[35]=t("h3",{class:"text-base md:text-lg font-medium text-gray-900 dark:text-white mb-4"},"ค้นหาและกรองผู้ใช้",-1)),t("div",jt,[t("div",null,[e[30]||(e[30]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"ค้นหาชื่อผู้ใช้",-1)),g(t("input",{"onUpdate:modelValue":e[1]||(e[1]=r=>h.value=r),type:"text",placeholder:"พิมพ์ชื่อผู้ใช้...",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:bg-gray-700 dark:text-white"},null,512),[[p,h.value]])]),t("div",null,[e[32]||(e[32]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"Filter by role",-1)),g(t("select",{"onUpdate:modelValue":e[2]||(e[2]=r=>_.value=r),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:bg-gray-700 dark:text-white"},[...e[31]||(e[31]=[t("option",{value:""},"All",-1),t("option",{value:"USER"},"User",-1),t("option",{value:"ADMIN"},"Admin",-1)])],512),[[f,_.value]])]),t("div",null,[e[34]||(e[34]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"Filter by status",-1)),g(t("select",{"onUpdate:modelValue":e[3]||(e[3]=r=>U.value=r),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:bg-gray-700 dark:text-white"},[...e[33]||(e[33]=[t("option",{value:""},"All",-1),t("option",{value:"active"},"Active",-1),t("option",{value:"inactive"},"Inactive",-1),t("option",{value:"suspended"},"Suspended",-1)])],512),[[f,U.value]])])]),t("div",{class:"mt-4 flex justify-center sm:justify-end"},[t("button",{onClick:Y,class:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-600 rounded-md hover:bg-gray-200 dark:hover:bg-gray-500 transition-colors w-full sm:w-auto"}," ล้างตัวกรอง ")])])]),t("div",zt,[t("div",Lt,[t("div",Rt,[t("h3",Ht,"รายชื่อผู้ใช้ ("+s(C.value.length)+" คน)",1),t("div",It,[e[37]||(e[37]=t("span",{class:"text-xs sm:text-sm text-gray-500 dark:text-gray-400"},"แสดง",-1)),g(t("select",{"onUpdate:modelValue":e[4]||(e[4]=r=>b.value=r),class:"px-2 py-1 border border-gray-300 dark:border-gray-600 rounded text-xs sm:text-sm dark:bg-gray-700 dark:text-white"},[...e[36]||(e[36]=[t("option",{value:"10"},"10",-1),t("option",{value:"25"},"25",-1),t("option",{value:"50"},"50",-1),t("option",{value:"100"},"100",-1)])],512),[[f,b.value]]),e[38]||(e[38]=t("span",{class:"text-xs sm:text-sm text-gray-500 dark:text-gray-400"},"รายการต่อหน้า",-1))])])]),t("div",Tt,[(n(!0),l(E,null,V(R.value,r=>(n(),l("div",{key:r.id,class:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 space-y-3"},[t("div",Nt,[t("div",Pt,[t("div",Ft,[t("div",qt,[Q(r.fullname)?(n(),l("svg",Ot,[...e[39]||(e[39]=[t("path",{d:"M12 12c2.761 0 5-2.239 5-5s-2.239-5-5-5-5 2.239-5 5 2.239 5 5 5zm0 2c-3.866 0-7 2.239-7 5v1h14v-1c0-2.761-3.134-5-7-5z"},null,-1)])])):(n(),l("svg",Qt,[...e[40]||(e[40]=[t("path",{d:"M12 12c2.761 0 5-2.239 5-5s-2.239-5-5-5-5 2.239-5 5 2.239 5 5 5zm3 2h-1.268A7.962 7.962 0 0012 13c-1.012 0-1.98.188-2.732.532H8c-2.761 0-5 2.014-5 4.5V21h18v-2.968C21 16.014 18.761 14 16 14z"},null,-1)])]))])]),t("div",null,[t("div",Wt,s(r.fullname),1),t("div",Gt,s(r.ubuaccount),1)])])]),t("div",Jt,[t("div",null,[e[41]||(e[41]=t("span",{class:"font-medium text-gray-700 dark:text-gray-300"},"คณะ:",-1)),e[42]||(e[42]=z()),t("span",Kt,s(r.faculty),1)]),t("div",null,[e[43]||(e[43]=t("span",{class:"font-medium text-gray-700 dark:text-gray-300"},"หน่วยงาน:",-1)),e[44]||(e[44]=z()),t("span",Xt,s(r.department_name),1)]),t("div",null,[e[45]||(e[45]=t("span",{class:"font-medium text-gray-700 dark:text-gray-300"},"ตำแหน่ง:",-1)),e[46]||(e[46]=z()),t("span",Yt,s(r.position),1)])]),t("div",Zt,[t("span",{class:v([P(r.status),"inline-flex px-2 py-1 text-xs font-semibold rounded-full"])},s(F(r.status)),3),t("span",{class:v([q(r.role),"inline-flex px-2 py-1 text-xs font-semibold rounded-full"])},s(O(r.role)),3)]),t("div",te," สมัครเมื่อ: "+s(W(r.created_at)),1),t("div",ee,[t("button",{onClick:d=>T(r),class:"flex-1 px-3 py-2 text-sm text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-300 border border-indigo-600 dark:border-indigo-400 rounded hover:bg-indigo-50 dark:hover:bg-indigo-900/20"}," แก้ไข ",8,re),t("button",{onClick:d=>N(r),class:"flex-1 px-3 py-2 text-sm text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300 border border-red-600 dark:border-red-400 rounded hover:bg-red-50 dark:hover:bg-red-900/20"}," ลบ ",8,ae)])]))),128))]),t("div",se,[t("table",oe,[e[49]||(e[49]=t("thead",{class:"bg-gray-50 dark:bg-gray-700"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"ผู้ใช้"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"คณะ/หน่วยงาน"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"ตำแหน่ง"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"สถานะ"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"บทบาท"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"วันที่สมัคร"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},"การจัดการ")])],-1)),t("tbody",de,[(n(!0),l(E,null,V(R.value,r=>(n(),l("tr",{key:r.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700"},[t("td",le,[t("div",ne,[t("div",ie,[t("div",ue,[Q(r.fullname)?(n(),l("svg",ge,[...e[47]||(e[47]=[t("path",{d:"M12 12c2.761 0 5-2.239 5-5s-2.239-5-5-5-5 2.239-5 5 2.239 5 5 5zm0 2c-3.866 0-7 2.239-7 5v1h14v-1c0-2.761-3.134-5-7-5z"},null,-1)])])):(n(),l("svg",xe,[...e[48]||(e[48]=[t("path",{d:"M12 12c2.761 0 5-2.239 5-5s-2.239-5-5-5-5 2.239-5 5 2.239 5 5 5zm3 2h-1.268A7.962 7.962 0 0012 13c-1.012 0-1.98.188-2.732.532H8c-2.761 0-5 2.014-5 4.5V21h18v-2.968C21 16.014 18.761 14 16 14z"},null,-1)])]))])]),t("div",ce,[t("div",ye,s(r.fullname),1),t("div",me,s(r.ubuaccount),1)])])]),t("td",ve,[t("div",be,s(r.faculty),1),t("div",pe,s(r.department_name),1)]),t("td",fe,[t("div",ke,s(r.position),1),r.level_name?(n(),l("div",we,s(r.level_name),1)):A("",!0)]),t("td",he,[t("span",{class:v([P(r.status),"inline-flex px-2 py-1 text-xs font-semibold rounded-full"])},s(F(r.status)),3)]),t("td",_e,[t("span",{class:v([q(r.role),"inline-flex px-2 py-1 text-xs font-semibold rounded-full"])},s(O(r.role)),3)]),t("td",Ue,s(W(r.created_at)),1),t("td",Ce,[t("div",Me,[t("button",{onClick:d=>T(r),class:"text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-300"}," แก้ไข ",8,Ae),t("button",{onClick:d=>N(r),class:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300"}," ลบ ",8,Be)])])]))),128))])])]),D.value>1?(n(),l("div",Se,[t("div",$e,[t("div",De," แสดง "+s((c.value-1)*b.value+1)+" ถึง "+s(Math.min(c.value*b.value,C.value.length))+" จาก "+s(C.value.length)+" รายการ ",1),t("div",Ee,[t("button",{onClick:e[5]||(e[5]=r=>c.value=Math.max(1,c.value-1)),disabled:c.value===1,class:"px-2 sm:px-3 py-2 text-xs sm:text-sm font-medium text-gray-500 dark:text-gray-400 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed"}," ก่อนหน้า ",8,Ve),t("div",je,[(n(!0),l(E,null,V(K.value,r=>(n(),l("button",{key:r,onClick:d=>c.value=r,class:v(["px-2 sm:px-3 py-2 text-xs sm:text-sm font-medium rounded-md",r===c.value?"bg-indigo-600 text-white":"text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700"])},s(r),11,ze))),128))]),t("button",{onClick:e[6]||(e[6]=r=>c.value=Math.min(D.value,c.value+1)),disabled:c.value===D.value,class:"px-2 sm:px-3 py-2 text-xs sm:text-sm font-medium text-gray-500 dark:text-gray-400 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed"}," ถัดไป ",8,Le)])])])):A("",!0)])]),S.value?(n(),l("div",Re,[t("div",He,[t("div",Ie,[e[60]||(e[60]=t("h3",{class:"text-lg font-medium text-gray-900 dark:text-white mb-4"},"เพิ่มผู้ใช้ใหม่",-1)),t("div",Te,[e[50]||(e[50]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"ค้นหาจากระบบ HR",-1)),t("div",Ne,[g(t("input",{"onUpdate:modelValue":e[7]||(e[7]=r=>k.value=r),type:"text",placeholder:"พิมพ์ชื่อ, นามสกุล, หรือ UBU Account...",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:bg-gray-700 dark:text-white"},null,512),[[p,k.value]]),k.value&&I.value.length>0?(n(),l("div",Pe,[(n(!0),l(E,null,V(I.value,r=>(n(),l("div",{key:r.personcode,onClick:d=>tt(r),class:"px-3 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 cursor-pointer border-b border-gray-200 dark:border-gray-600 last:border-b-0"},[t("div",qe,s(r.prefix_name||"")+s(r.fname||"")+" "+s(r.lname||""),1),t("div",Oe,s(r.ubuaccount||"ไม่มี UBU Account")+" | "+s(r.faculty_name||"ไม่ระบุคณะ"),1)],8,Fe))),128))])):A("",!0)])]),t("form",{onSubmit:G(et,["prevent"])},[t("div",Qe,[e[51]||(e[51]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"ชื่อ-นามสกุล",-1)),g(t("input",{"onUpdate:modelValue":e[8]||(e[8]=r=>i.value.fullname=r),type:"text",required:"",disabled:m.value,class:v(["w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 dark:bg-gray-700 dark:text-white",m.value?"border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-600 text-gray-500 dark:text-gray-400 cursor-not-allowed":"border-gray-300 dark:border-gray-600 focus:ring-indigo-500"]),placeholder:"กรอกชื่อ-นามสกุล"},null,10,We),[[p,i.value.fullname]])]),t("div",Ge,[e[52]||(e[52]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"UBU Account",-1)),g(t("input",{"onUpdate:modelValue":e[9]||(e[9]=r=>i.value.ubuaccount=r),type:"text",required:"",disabled:m.value,class:v(["w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 dark:bg-gray-700 dark:text-white",m.value?"border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-600 text-gray-500 dark:text-gray-400 cursor-not-allowed":"border-gray-300 dark:border-gray-600 focus:ring-indigo-500"]),placeholder:"กรอก UBU Account"},null,10,Je),[[p,i.value.ubuaccount]])]),t("div",Ke,[e[53]||(e[53]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"อีเมล",-1)),g(t("input",{"onUpdate:modelValue":e[10]||(e[10]=r=>i.value.email=r),type:"email",disabled:m.value,class:v(["w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 dark:bg-gray-700 dark:text-white",m.value?"border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-600 text-gray-500 dark:text-gray-400 cursor-not-allowed":"border-gray-300 dark:border-gray-600 focus:ring-indigo-500"]),placeholder:"กรอกอีเมล"},null,10,Xe),[[p,i.value.email]])]),t("div",Ye,[e[54]||(e[54]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"คณะ",-1)),g(t("input",{"onUpdate:modelValue":e[11]||(e[11]=r=>i.value.faculty=r),type:"text",disabled:m.value,class:v(["w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 dark:bg-gray-700 dark:text-white",m.value?"border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-600 text-gray-500 dark:text-gray-400 cursor-not-allowed":"border-gray-300 dark:border-gray-600 focus:ring-indigo-500"]),placeholder:"กรอกคณะ"},null,10,Ze),[[p,i.value.faculty]])]),t("div",tr,[e[56]||(e[56]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"Role",-1)),g(t("select",{"onUpdate:modelValue":e[12]||(e[12]=r=>i.value.role=r),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:bg-gray-700 dark:text-white"},[...e[55]||(e[55]=[t("option",{value:"USER"},"User",-1),t("option",{value:"ADMIN"},"Admin",-1)])],512),[[f,i.value.role]])]),t("div",er,[e[58]||(e[58]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"Status",-1)),g(t("select",{"onUpdate:modelValue":e[13]||(e[13]=r=>i.value.status=r),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:bg-gray-700 dark:text-white"},[...e[57]||(e[57]=[t("option",{value:"active"},"Active",-1),t("option",{value:"inactive"},"Inactive",-1),t("option",{value:"suspended"},"Suspended",-1)])],512),[[f,i.value.status]])]),t("div",rr,[t("button",{type:"button",onClick:e[14]||(e[14]=r=>S.value=!1),class:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-600 rounded-md hover:bg-gray-200 dark:hover:bg-gray-500"}," ยกเลิก "),e[59]||(e[59]=t("button",{type:"submit",class:"px-4 py-2 text-sm font-medium text-white bg-green-600 rounded-md hover:bg-green-700"}," เพิ่มผู้ใช้ ",-1))])],32)])])])):A("",!0),B.value?(n(),l("div",ar,[t("div",sr,[t("div",or,[e[67]||(e[67]=t("h3",{class:"text-lg font-medium text-gray-900 dark:text-white mb-4"},"แก้ไขผู้ใช้",-1)),t("form",{onSubmit:G(rt,["prevent"])},[t("div",dr,[e[61]||(e[61]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"ชื่อ-นามสกุล",-1)),g(t("input",{"onUpdate:modelValue":e[15]||(e[15]=r=>y.value.fullname=r),type:"text",class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:bg-gray-700 dark:text-white",readonly:""},null,512),[[p,y.value.fullname]])]),t("div",lr,[e[63]||(e[63]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"Role",-1)),g(t("select",{"onUpdate:modelValue":e[16]||(e[16]=r=>y.value.role=r),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:bg-gray-700 dark:text-white"},[...e[62]||(e[62]=[t("option",{value:"USER"},"User",-1),t("option",{value:"ADMIN"},"Admin",-1)])],512),[[f,y.value.role]])]),t("div",nr,[e[65]||(e[65]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"Status",-1)),g(t("select",{"onUpdate:modelValue":e[17]||(e[17]=r=>y.value.status=r),class:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:bg-gray-700 dark:text-white"},[...e[64]||(e[64]=[t("option",{value:"active"},"Active",-1),t("option",{value:"inactive"},"Inactive",-1),t("option",{value:"suspended"},"Suspended",-1)])],512),[[f,y.value.status]])]),t("div",ir,[t("button",{type:"button",onClick:e[18]||(e[18]=r=>B.value=!1),class:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-600 rounded-md hover:bg-gray-200 dark:hover:bg-gray-500"}," ยกเลิก "),e[66]||(e[66]=t("button",{type:"submit",class:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 rounded-md hover:bg-indigo-700"}," บันทึก ",-1))])],32)])])])):A("",!0)])}}});export{xr as default};
