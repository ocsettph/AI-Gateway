import{M as i,g as s,N as c,J as t}from"#entry";const m=i(async(l,u)=>{let e,o;try{const r=s().public.apiBase,a=([e,o]=c(()=>$fetch(`${r}/api/me`,{credentials:"include"})),e=await e,o(),e);if(!a?.user)return t("/login");const n=(a.user.role||"").toLowerCase();if(!["admin"].includes(n))return t("/")}catch(r){return console.error("Admin middleware error:",r),t("/login")}});export{m as default};
